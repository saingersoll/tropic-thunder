---
title: "tropic-thunder-cleaning"
author: "Annie Adams"
format: html
editor: visual
---

```{r}
library(here)
library(tidyverse)
library(dplyr)
library(janitor)
library(lubridate)

library(plotly)
```

## Cleaning Data

LUQ LTER method detection limits

Quebrada one-Bisley (Q1) Chemistry Data

Quebrada two-Bisley (Q2) Chemistry Data

Quebrada three-Bisley (Q3) Chemistry Data

```{r}
PRM <- read_csv(here("raw-data","RioMameyesPuenteRoto.csv"))
Q1 <-  read_csv(here("raw-data", "QuebradaCuenca1-Bisley.csv"))
Q2 <-  read_csv(here("raw-data", "QuebradaCuenca2-Bisley.csv"))
Q3 <-  read_csv(here("raw-data", "QuebradaCuenca3-Bisley.csv"))

```

Cleaning Model

```{r}
PRM_clean <- PRM %>% clean_names() %>% 
  mutate(clean_date = lubridate::ymd(sample_date)) %>% 
  select(clean_date, no3_n, k, sample_id)
Q1_clean <- Q1 %>% clean_names() %>% 
  mutate(clean_date = lubridate::ymd(sample_date)) %>% 
    select(clean_date, no3_n, k, sample_id)
Q2_clean <- Q2 %>% clean_names() %>% 
  mutate(clean_date = lubridate::ymd(sample_date)) %>% 
    select(clean_date, no3_n, k, sample_id)
Q3_clean <- Q3 %>% clean_names() %>% 
  mutate(clean_date = lubridate::ymd(sample_date)) %>% 
  select(clean_date, no3_n, k, sample_id)
```

Combine Rows

```{r}
total_data1<- bind_rows(PRM_clean,Q1_clean)
total_data2<- bind_rows(total_data1, Q2_clean)
total_data <- bind_rows(total_data2, Q3_clean)
```

```{r}
 k_plot <- ggplot(data = total_data , aes(x = clean_date, y = k))+
  geom_line(aes(color = sample_id)) +
  labs(x = "Year",
       y = "K mg i-1")
 
 k_plot
```

```{r}
 n_plot <- ggplot(data = total_data , aes(x = clean_date, y = no3_n))+
  geom_line(aes(color = sample_id)) +
  labs(x = "Year",
       y = "NO3 mg i-1")
 
 n_plot
```

```{r}
final_plot <- subplot(n_plot, k_plot, nrows = 2) %>% 
  layout(title = "")


final_plot <- final_plot %>% layout(title = "Water Stream Chemistry - Luqillo Mountains",
                     plot_bgcolor='#E5ECF6',
         xaxis = list(
           zerolinecolor = '#ffff',
           zerolinewidth = 2,
           gridcolor = 'ffff'),
         yaxis = list(
           zerolinecolor = '#ffff',
           zerolinewidth = 2,
           gridcolor = 'ffff'))

final_plot
```
